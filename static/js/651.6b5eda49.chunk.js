"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[651],{651:(s,e,t)=>{t.r(e),t.d(e,{default:()=>Z});var o=t(43),r=t(515);const a="ProfileInfo_descriptionBlock__AnwTh",i="ProfileInfo_coverImg__o5WzT",n="ProfileInfo_profileStatus__Gsp+H",l="ProfileInfo_userDescription__cR5D7",c="ProfileInfo_bio__H8Kfk",d="ProfileInfo_expanded__cpOH-",u="ProfileInfo_toggleArrow__rN9PF",p="ProfileInfo_contact__ZC2Hm",h="ProfileInfo_editButton__VOUcS",m="ProfileInfo_skills__A8uqW";var x=t(586),f=t(314),j=t(579);const _=s=>{const[e,t]=(0,o.useState)(!1),[r,a]=(0,o.useState)(s.status);(0,o.useEffect)((()=>{s.status!==r&&a(s.status)}),[s.status]);return(0,j.jsx)("b",{children:e?(0,j.jsx)("div",{children:(0,j.jsx)("input",{onChange:s=>{a(s.currentTarget.value)},onBlur:()=>{t(!1),s.updateStatus(r)},autoFocus:!0,value:r})}):(0,j.jsx)("div",{children:(0,j.jsx)("span",{onDoubleClick:()=>{t(!0)},children:s.status||"------"})})})},v="ProfileDataForm_bio__u8CcD",g="ProfileDataForm_formGroup__TAJrp",P="ProfileDataForm_skills__uFwyG",b="ProfileDataForm_saveButton__mD2KO",N="ProfileDataForm_userName__NF3f3",k="ProfileDataForm_contact__dwa5V",F="ProfileDataForm_header__SRBcX",S="ProfileDataForm_error__9MMx4",M="ProfileDataForm_userContacts__nKlou";var A=t(951),y=t(858);const C=s=>{let{profile:e,onSubmit:t,setEditMode:r,errorMessage:a}=s;const[i,n]=(0,o.useState)(!0),[l,c]=(0,o.useState)(null),{register:d,handleSubmit:u,formState:{errors:p,touchedFields:h}}=(0,y.mN)({defaultValues:{fullName:e.fullName,lookingForAJob:e.lookingForAJob,lookingForAJobDescription:e.lookingForAJobDescription,aboutMe:e.aboutMe,contacts:e.contacts||{}}});return(0,j.jsx)("form",{onSubmit:u((s=>t(s,c))),children:(0,j.jsxs)("div",{className:v,children:[(0,j.jsxs)("div",{className:F,onClick:()=>{n(!i),i&&r(!1)},children:["Main user info",(0,j.jsx)("span",{children:"\u25b2"})]}),i&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{className:g,children:[(0,j.jsx)("b",{className:N,children:"Name: "}),(0,j.jsx)(A.MJ,{Component:"input",name:"fullName",register:d,errors:p,touchedFields:h})]}),(0,j.jsxs)("div",{className:g,children:[(0,j.jsx)("b",{children:"Looking for a job: "}),(0,j.jsx)("input",{type:"checkbox",...d("lookingForAJob")})]}),(0,j.jsxs)("div",{className:g,children:[(0,j.jsx)("b",{children:"My professional skills: "}),(0,j.jsx)("div",{className:P,children:(0,j.jsx)(A.MJ,{Component:"textarea",name:"lookingForAJobDescription",register:d,errors:p,touchedFields:h})})]}),(0,j.jsxs)("div",{className:g,children:[(0,j.jsx)("b",{children:"About me: "}),(0,j.jsx)(A.MJ,{Component:"textarea",name:"aboutMe",register:d,errors:p,touchedFields:h})]}),(0,j.jsx)("div",{className:g,children:(0,j.jsxs)("div",{className:M,children:[(0,j.jsx)("b",{children:"Contacts: "}),Object.keys(e.contacts).map((s=>(0,j.jsxs)("div",{className:k,children:[(0,j.jsxs)("b",{children:[s,":"]}),(0,j.jsx)(A.MJ,{Component:"input",name:`contacts.${s}`,register:d,errors:p,touchedFields:h}),"string"===typeof a?s.includes(a.split(/[-()>]/)[3].toLowerCase())&&(0,j.jsx)("span",{className:S,children:a}):""]},s)))]})}),(0,j.jsx)("div",{children:(0,j.jsx)("button",{type:"submit",className:b,children:"Save info"})})]})]})})},I=s=>{let{contactTitle:e,contactValue:t}=s;return(0,j.jsxs)("div",{className:p,children:[(0,j.jsxs)("b",{children:[e,":"]})," ",(0,j.jsx)("span",{children:t})]})},w=s=>{let{profile:e,isOwner:t,activateEditMode:o,expanded:r,setExpanded:a}=s;return(0,j.jsx)("div",{children:(0,j.jsxs)("div",{className:`${c} ${r?d:""}`,onClick:()=>a(!r),children:["Main user info",(0,j.jsx)("span",{className:u,children:r?"\u25b2":"\u25bc"}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"Name: "})," ",e.fullName]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"Looking for a job: "})," ",e.lookingForAJob?"yes":"no"]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"My professional skills: "})," ",(0,j.jsxs)("div",{className:m,children:[e.lookingForAJobDescription||"not filled"," "]})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"About me: "})," ",e.aboutMe]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("b",{children:"Contacts: "})," ",Object.keys(e.contacts).map((s=>(0,j.jsx)(I,{contactTitle:s,contactValue:e.contacts[s]},s)))]}),t&&(0,j.jsx)("div",{children:(0,j.jsx)("button",{onClick:o,className:h,children:"Edit info"})})]})})},D=s=>{let{profile:e,status:t,updateStatus:c,isOwner:d,savePhoto:u,saveProfile:p}=s,[h,m]=(0,o.useState)(!1),[v,g]=(0,o.useState)(!1);const[P,b]=(0,o.useState)(null);if(!e)return(0,j.jsx)(x.A,{});return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{children:(0,j.jsx)("img",{className:i,src:r.Bh,alt:"logo"})}),(0,j.jsxs)("div",{className:a,children:[e&&e.photos?(0,j.jsxs)("div",{className:l,children:[(0,j.jsx)("img",{src:e.photos.large||f,alt:""}),d?(0,j.jsx)("input",{type:"file",onChange:s=>{if(s.target.files.length){const e=s.target.files[0];u(e)}}}):"",h?(0,j.jsx)(C,{profile:e,onSubmit:async(s,e)=>{try{await p(s),m(!1),g(!0),b(null)}catch(t){if(t.errors&&e)t.errors.forEach((s=>{let{field:t,message:o}=s;e(t,{type:"server",message:o})}));else if(t.message&&e){const s=t.message.match(/Invalid url format \(Contacts -> (\w+)\)/);if(s){const t=s[1].toLowerCase();e(`contacts.${t}`,{type:"server",message:"Invalid URL format"})}else b(t.message)}}},setExpanded:g,setEditMode:m,errorMessage:P}):(0,j.jsx)(w,{activateEditMode:s=>{m(!0),s.stopPropagation()},profile:e,isOwner:d,expanded:v,setExpanded:g})]}):(0,j.jsx)(x.A,{}),(0,j.jsxs)("div",{className:n,children:["Status ",(0,j.jsx)(_,{status:t,updateStatus:c})]})]})]})};var J=t(977);const O="MyPosts_item__220WX",E="MyPosts_posts__qFwQp",T="Post_content__xUVaM",U="Post_item__xe6sQ",z=s=>(0,j.jsx)("div",{className:U,children:(0,j.jsxs)("div",{className:T,children:[(0,j.jsx)("img",{src:s.image,alt:""}),(0,j.jsxs)("span",{children:[" ",s.message," "]}),(0,j.jsx)("div",{children:(0,j.jsxs)("span",{children:[" Like ",s.likes," "]})})]})}),B=s=>(0,j.jsx)(A.c3,{onAddPost:s.onAddPost}),L=o.memo((s=>{const e=[...s.posts].reverse().map((s=>(0,j.jsx)(z,{image:r.my,message:s.message,likes:s.likesCount})));return(0,j.jsxs)("div",{className:O,children:[(0,j.jsx)("h3",{children:"My posts"}),(0,j.jsx)(B,{onAddPost:e=>{s.updateNewPostText(e),s.addPost(e)}}),(0,j.jsx)("div",{className:E,children:e})]})}));var V=t(3);const H=(0,V.Ng)((s=>({posts:s.profilePage.posts,newPostText:s.profilePage.newPostText,users:s.usersPage.users})),(s=>({updateNewPostText:e=>{let t=(0,J.uJ)(e);s(t)},addPost:e=>{s((0,J.oL)(e))}})))(L),$=s=>(0,j.jsxs)("div",{children:[(0,j.jsx)(D,{profile:s.profile,isOwner:s.isOwner,status:s.status,updateStatus:s.updateStatus,savePhoto:s.savePhoto,saveProfile:s.saveProfile}),(0,j.jsx)(H,{})]});var G=t(906),K=t(947),R=t(923);class W extends o.Component{refreshProfile(){let s=this.props.params.userId||this.props.authorizedUserId;this.props.getUserProfile(s),this.props.getStatus(s)}componentDidMount(){this.refreshProfile()}componentDidUpdate(s,e,t){(this.props.params.userId||this.props.authorizedUserId)!==(s.params.userId||s.authorizedUserId)&&this.refreshProfile()}render(){return(0,j.jsx)($,{...this.props,isOwner:!this.props.params.userId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})}}const Z=(0,R.Zz)((0,V.Ng)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuthorized:s.auth.isAuthorized})),{getUserProfile:J.VM,getStatus:J.BS,updateStatus:J.yB,savePhoto:J.Ah,saveProfile:J.Lt}),(function(s){return e=>{const t=(0,G.Zp)(),o=(0,G.g)(),r=(0,G.zy)();return(0,j.jsx)(s,{...e,navigate:t,params:o,location:r})}}),K.A)(W)}}]);
//# sourceMappingURL=651.6b5eda49.chunk.js.map